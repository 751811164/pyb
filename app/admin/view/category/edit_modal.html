
<div class="modal-dialog" role="document" style="width: 308px;">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title" id="myModalLabel">分类管理</h4>
        </div>
        <div class="modal-body">
            <form  class="form-horizontal">
                <div class="row">



                    {empty name="info"}
                    <input type="hidden" name="pid" value="{$Think.get.pid|default='0'}">
                    {else /}
                    <input type="hidden" name="id" value="{$info.id|default=''}">
                    {/empty}
                </div>

                <div class="row">
                    {empty name="info"}
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">编号</label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="text" class="form-control" name="number" placeholder="编号" value="{$info.number|default=''}" readonly>
                                    <span class="input-group-btn"><button id="createCode" class="btn btn-default create-code" type="button">生成</button></span>
                                </div>

                                <!--<input type="text" class="form-control" name="number" value="{$info.number|default=''}">-->
                            </div>
                        </div>
                    </div>
                    {/empty}
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">分类名</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" name="name" value="{$info.name|default=''}">
                            </div>
                        </div>
                    </div>

                </div>



            </form>
        </div>
        <div class="modal-footer">
            <button type="button" id="saveInfo" class="btn skin-blue-light" data-url="{notempty name='$info.id'}{:url('categoryEdit')}{else/}{:url('categoryAdd')}{/notempty}">保存</button>

        </div>
    </div>
</div>

<script>


    //获取编号
    $(".create-code").on('click',function(){
        var $this = $(this);
        $.get("{:url('createCode')}",function(data){
            $this.parent().prev("input").val(data);
        })

    })

</script>